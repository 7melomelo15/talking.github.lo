<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>çµ±åˆç‰ˆã‚¢ãƒ—ãƒªã€è¶…é€²åŒ–ç‰ˆã€‘</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; font-family: 'Poppins', sans-serif; background: #ffffff; color: #333; min-height: 100vh; overflow-x: hidden; }
    .page { display: none; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; text-align: center; }
    .page.active { display: flex; }
    .container { width: 100%; max-width: 400px; position: relative; }
    .header { width: 100%; text-align: center; position: relative; margin-bottom: 20px; }
    .menu { position: absolute; top: 0; left: 10px; font-size: 24px; color: #333; cursor: pointer; z-index: 1010; }
    .account-name { font-size: 20px; opacity: 0.7; }
    .notification { position: absolute; top: 0; right: 10px; font-size: 24px; color: #333; cursor: pointer; z-index: 1010; display: flex; align-items: center; }
    .notification svg { width: 28px; height: 28px; }
    .side-menu { position: fixed; top: 0; left: -250px; width: 250px; height: 100%; background: #e0f7fa; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.2); transition: 0.3s; z-index: 1005; }
    .side-menu.active { left: 0; }
    .side-menu p { margin: 20px 0; font-size: 18px; }
    .profile { background: #e0f7fa; padding: 20px; border-radius: 20px; text-align: center; position: relative; margin-bottom: 20px; transition: background 0.3s; }
    .profile img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px; object-fit: cover; }
    .profile h2 { font-family: 'Poppins', sans-serif; font-size: 28px; font-weight: 600; color: #333; margin: 10px 0; }
    .profile-divider { width: 80%; border: none; border-top: 1px solid #ccc; margin: 20px auto; }
    .tag, .section-tag { position: absolute; top: 10px; left: 10px; background: #4dd0e1; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; }
    .follow-button { position: absolute; top: 10px; right: 10px; padding: 4px 12px; border: 2px solid #ff69b4; border-radius: 12px; background: #ffffff; color: #ff69b4; font-size: 12px; cursor: pointer; transition: 0.3s; }
    .followed { background: #ff69b4; color: #ffffff; }
    .status-dot { position: absolute; bottom: 8px; right: 8px; width: 16px; height: 16px; border: 2px solid #e0f7fa; border-radius: 50%; background-color: limegreen; }
    .status-online { background-color: limegreen; }
    .status-offline { background-color: gray; }
    .status-busy { background-color: red; }
    .stats { display: flex; justify-content: space-around; margin-top: 8px; align-items: center; text-align: center; }
    .stats div { cursor: pointer; padding: 1px; border-radius: 10px; transition: background 0.3s, padding 0.3s; }
    .stats div:hover { background: #b2ebf2; padding-left: 20px; padding-right: 20px; }
    .number { display: block; font-size: 18px; color: #00acc1; margin: 1px 0; }
    .label { display: block; font-size: 12px; color: #666; margin-top: 1px; }
    .stars { font-size: 18px; background: linear-gradient(45deg, #00acc1, #4dd0e1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: block; margin: 1px 0; }
    .archivement { font-size: 12px; color: #666; margin-top: 1px; }
    .section { background: #e0f7fa; padding: 20px; border-radius: 20px; margin-top: 20px; position: relative; }
    .section-list { max-height: 210px; overflow-y: auto; padding-top: 20px; padding-right: 5px; }
    .section-list::-webkit-scrollbar { display: none; }
    .theme-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 10px; border-bottom: 1px solid #ccc; transition: background 0.3s, padding 0.3s; cursor: pointer; }
    .theme-item:hover, .theme-item.selected { background: #b2ebf2; padding-left: 20px; padding-right: 20px; }
    .theme-text { text-align: left; }
    .theme-title { font-weight: normal; font-size: 14px; margin-bottom: 5px; }
    .theme-desc { font-size: 11px; color: #666; }
    .detail-button { background: linear-gradient(45deg, #4dd0e1, #00acc1); border: none; border-radius: 20px; padding: 5px 15px; font-size: 11px; color: white; cursor: pointer; }

    /* â–¼ ã“ã“ã‹ã‚‰ é«˜ã•ãã‚ãˆæ”¹è‰¯ç‰ˆ â–¼ */
    .charge-grid {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      margin-top: 10px;
      gap: 10px;
      flex-wrap: wrap;
    }
    .charge-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #333;
      min-width: 80px;
    }
    .charge-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .charge-label {
      font-size: 11px;
      color: #666;
      margin-top: 5px;
    }
    .charge-value {
      font-size: 14px;
      color: #555;
      margin-top: 5px;
    }
    .charge-symbol {
      font-size: 28px;
      color: #00acc1;
      line-height: 1;
    }
    /* â–² ã“ã“ã¾ã§ é«˜ã•ãã‚ãˆæ”¹è‰¯ç‰ˆ â–² */

    .slot { height: 20px; overflow: hidden; position: relative; }
    .slot-inner { display: flex; flex-direction: column; transition: transform 0.5s ease-out; }
    .slot-inner div { height: 20px; line-height: 20px; font-size: 14px; }
    .nav { display: flex; justify-content: space-around; background: #e0f7fa; position: fixed; bottom: 0; width: 100%; padding: 10px 0; border-top: 1px solid #ccc; }
    .nav button { background: linear-gradient(45deg, #4dd0e1, #00acc1); border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 20px; color: white; cursor: pointer; }
    input[type=range] { -webkit-appearance: none; width: 100%; height: 8px; background: linear-gradient(to right, #00acc1 0%, #ccc 0%); border-radius: 4px; outline: none; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: #00acc1; border: 3px solid white; border-radius: 50%; cursor: pointer; margin-top: -8px; }

.animated-gradient {
  background: linear-gradient(270deg, #00c6ff, #0072ff, #00c6ff);
  background-size: 400% 400%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shineFlow 3s linear infinite;
}

@keyframes shineFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–èª¿æ•´ */
@media (max-width: 768px) {
  .container {
    max-width: 100%;
    padding: 10px;
  }
  .header .account-name {
    font-size: 18px;
  }
  .profile h2 {
    font-size: 22px;
  }
  .stats .number {
    font-size: 16px;
  }
  .stats .label {
    font-size: 10px;
  }
  .stars {
    font-size: 16px;
  }
  .theme-title {
    font-size: 13px;
  }
  .theme-desc {
    font-size: 10px;
  }
  .detail-button {
    padding: 5px 10px;
    font-size: 10px;
  }
  .charge-item {
    min-width: 70px;
  }
  .charge-label {
    font-size: 10px;
  }
  .charge-value {
    font-size: 12px;
  }
  .charge-symbol {
    font-size: 24px;
  }
  .nav button {
    width: 44px;
    height: 44px;
    font-size: 18px;
  }
  .nav img {
    width: 20px;
    height: 20px;
  }
}

@media (max-width: 480px) {
  .profile img {
    width: 60px;
    height: 60px;
  }
  .profile h2 {
    font-size: 20px;
  }
  .stats {
    flex-direction: column;
    gap: 10px;
  }
  .theme-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  .theme-item button {
    width: 100%;
  }
  .charge-grid {
    flex-direction: column;
    gap: 15px;
  }
  .nav {
    padding: 8px 0;
  }
  .nav button {
    width: 40px;
    height: 40px;
  }
}
  </style>
</head>
<body>
<!-- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<div id="sideMenu" class="side-menu">
  <p>ãƒ­ã‚°ã‚¤ãƒ³/æ–°è¦ç™»éŒ²</p>
  <p>Talkingã¨ã¯ï¼Ÿ</p>
  <p>ãƒã‚¤ãƒšãƒ¼ã‚¸</p>
  <p>äºˆç´„ç®¡ç†</p>
  <p>è¨­å®š</p>
  <p>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</p>
</div>

<!-- ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ -->
<div id="page-home" class="page active">
  <div class="container">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
      <div class="menu" onclick="toggleMenu()">â‰¡</div>
      <h1 class="account-name animated-gradient">My Page</h1>
      <div class="notification" id="notificationIcon" onclick="toggleNotification()">
        <svg id="bellOff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#00acc1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
        <svg id="bellOn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#00acc1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none;">
          <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
      </div>
    </div>

    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« -->
    <div class="profile">
      <div class="tag">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</div>
      <div class="follow-button" id="followButton" onclick="toggleFollow()">ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹</div>
      <div style="position: relative; display: inline-block;">
        <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=80&h=80&q=80" alt="Profile">
        <div class="status-dot status-online"></div>
      </div>
      <h2>Hikaru</h2>
      <hr class="profile-divider">
      <div class="stats">
        <div>
          <span class="number">32</span>
          <span class="label">é€šè©±å›æ•°</span>
        </div>
        <div>
          <span class="number">123</span>
          <span class="label">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼</span>
        </div>
        <div>
          <span class="stars">â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</span>
          <span class="archivement">åˆ©ç”¨å®Ÿç¸¾/è©•ä¾¡ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
        </div>
      </div>
    </div>
    <!-- ãƒ†ãƒ¼ãƒ -->
    <div class="section">
      <div class="section-tag">ãƒ†ãƒ¼ãƒ</div>
      <div class="section-list" id="themeList">
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">ç•™å­¦</div>
            <div class="theme-desc">ã‚¢ãƒ¡ãƒªã‚«ã¨ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ç•™å­¦çµŒé¨“ã‚ã‚Šï¼</div>
          </div>
          <button class="detail-button" onclick="openModal('studyModal'); event.stopPropagation();">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">ç¨å‹™ç›¸è«‡</div>
            <div class="theme-desc">æ—¥ç‹¬é–“ã®ç¨å‹™å°‚é–€ã‚µãƒãƒ¼ãƒˆï¼</div>
          </div>
          <button class="detail-button" onclick="openModal('taxModal'); event.stopPropagation();">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">å ã„</div>
            <div class="theme-desc">ã‚¿ãƒ­ãƒƒãƒˆã¨è¥¿æ´‹å æ˜Ÿè¡“ãŒå¾—æ„ï¼</div>
          </div>
          <button class="detail-button" onclick="openModal('fortuneModal'); event.stopPropagation();">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">æµ·å¤–æ—…è¡Œ</div>
            <div class="theme-desc">ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®ç©´å ´ã‚¹ãƒãƒƒãƒˆã‚’ç´¹ä»‹ï¼</div>
          </div>
          <button class="detail-button" onclick="openModal('travelModal'); event.stopPropagation();">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">é§åœ¨</div>
            <div class="theme-desc">ãƒ‰ã‚¤ãƒ„ç”Ÿæ´»ã§å½¹ç«‹ã¤æƒ…å ±ãŒãŸãã•ã‚“ï¼</div>
          </div>
          <button class="detail-button" onclick="openModal('expatModal'); event.stopPropagation();">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
      </div>
    </div>

    <!-- æ–™é‡‘ -->
    <div class="section">
      <div class="section-tag">æ–™é‡‘</div>
      <div class="charge-grid">
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" width="100%" height="100%">
              <rect x="2" y="2" width="60" height="44" rx="6" ry="6" stroke="#333" stroke-width="1" fill="none"></rect>
              <rect x="6" y="6" width="52" height="36" rx="4" ry="4" stroke="#333" stroke-width="0.5" fill="none"></rect>
              <circle cx="14" cy="14" r="3" stroke="#333" stroke-width="1" fill="none"></circle>
              <text x="32" y="30" text-anchor="middle" font-size="20" fill="#333" font-family="Arial, sans-serif">Â¥</text>
            </svg>
          </div>
          <div class="charge-label">å˜ä¾¡</div>
          <div class="charge-value">200å††/åˆ†</div>
        </div>
        <div class="charge-symbol">Ã—</div>
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100%" height="100%">
              <circle cx="12" cy="12" r="10" stroke="#333" stroke-width="1" fill="none" />
              <line x1="12" y1="12" x2="12" y2="7" stroke="#00acc1" stroke-width="1.5" stroke-linecap="round" />
              <line x1="12" y1="12" x2="16" y2="12" stroke="#00acc1" stroke-width="1.5" stroke-linecap="round" />
            </svg>
          </div>
          <div class="charge-label">ã”åˆ©ç”¨æ™‚é–“</div>
          <div class="charge-value">
            <div class="slot" id="timeSlot"></div>
          </div>
        </div>
        <div class="charge-symbol">ï¼</div>
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" fill="none" width="100%" height="100%">
              <rect x="2" y="4" width="60" height="40" rx="4" ry="4" stroke="#333" stroke-width="2" fill="none"></rect>
              <rect x="10" y="16" width="12" height="8" rx="1" ry="1" fill="#FFD700" stroke="#FFD700" stroke-width="1"></rect>
              <line x1="2" y1="16" x2="62" y2="16" stroke="#333" stroke-width="2"></line>
            </svg>
          </div>
          <div class="charge-label">ãŠæ”¯æ‰•é¡</div>
          <div class="charge-value">
            <div class="slot" id="paySlot"></div>
          </div>
        </div>
      </div>

      <!-- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ -->
      <div style="margin-top:20px;">
        <input type="range" id="timeSlider" min="0" max="60" step="1" value="5">
      </div>
    </div>

    <!-- é€šè©±/äºˆç´„ -->
    <div class="section">
      <div class="section-tag">é€šè©±/äºˆç´„</div>
      <div style="margin-top:30px; display: flex; justify-content: center; gap: 20px;">
  <button class="detail-button" style="padding: 10px 20px; font-size: 14px;" onclick="startCall()">ä»Šã™ãé€šè©±</button>
  <button class="detail-button" id="toggleCalendarBtn" style="padding: 10px 20px; font-size: 14px;" onclick="toggleCalendar()">äºˆç´„ã™ã‚‹</button>
</div>

      <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¨ãƒªã‚¢ãƒ»æ™‚é–“ãƒªã‚¹ãƒˆ -->
      <div id="calendarArea" style="display:none; margin-top:20px;">
        <div id="calendar"></div>
      </div>
      <div id="timeListArea" style="display:none; margin-top:20px;">
        <h4 id="selectedDate" style="margin-bottom:10px;"></h4>
        <div id="timeList"></div>
        <div id="confirmArea" style="display:none; margin-top:20px;">
          <button class="detail-button" onclick="confirmReservation()">äºˆç´„ç¢ºèª</button>
        </div>
      </div>
    </div>

  </div>
</div>

   <!-- ãƒãƒ£ãƒƒãƒˆã™ã‚‹ãƒœã‚¿ãƒ³ -->
   <div style="display: flex; justify-content: center; margin: 30px 0;">
    <button style="
    width: 85%;
    padding: 12px 20px;
    font-size: 16px;
    color: #00acc1;
    background: white;
    border: 2px solid #00acc1;
    border-radius: 12px;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
  " onclick="startChat()">ãƒãƒ£ãƒƒãƒˆã™ã‚‹</button>
</div>

<!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
<div class="nav">
  <button><img src="home-icon.svg" alt="ãƒ›ãƒ¼ãƒ " style="width:24px; height:24px;"></button>
  <button><img src="search-icon.svg" alt="æ¤œç´¢" style="width:24px; height:24px;"></button>
  <button><img src="plus-icon.svg" alt="è¿½åŠ " style="width:24px; height:24px;"></button>
  <button><img src="chat-icon.svg" alt="ãƒãƒ£ãƒƒãƒˆ" style="width:24px; height:24px;"></button>
  <button><img src="user-icon.svg" alt="ãƒã‚¤ãƒšãƒ¼ã‚¸" style="width:24px; height:24px;"></button>
</div>

<!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
<script>
function toggleMenu() {
  document.getElementById('sideMenu').classList.toggle('active');
}

// ğŸ”” é€šçŸ¥ã‚¢ã‚¤ã‚³ãƒ³ãƒˆã‚°ãƒ«åˆ‡ã‚Šæ›¿ãˆ
function toggleNotification() {
  const bellOff = document.getElementById('bellOff');
  const bellOn = document.getElementById('bellOn');
  
  if (bellOff.style.display === 'none') {
    bellOff.style.display = 'block';
    bellOn.style.display = 'none';
  } else {
    bellOff.style.display = 'none';
    bellOn.style.display = 'block';
  }
}

// â™¡ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³ãƒˆã‚°ãƒ«ï¼ˆãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šæ›¿ãˆã‚ã‚Šï¼‰
function toggleFollow() {
  const button = document.getElementById('followButton');
  button.classList.toggle('followed');
  
  if (button.classList.contains('followed')) {
    button.innerText = 'ãƒ•ã‚©ãƒ­ãƒ¼ä¸­';
  } else {
    button.innerText = 'ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹';
  }
}

function openModal(id) {
  document.getElementById(id).style.display = 'block';
}

function closeModal(id) {
  document.getElementById(id).style.display = 'none';
}

// ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ç”¨
function generateSlot(id, items) {
  const slot = document.getElementById(id);
  const inner = document.createElement('div');
  inner.className = 'slot-inner';
  items.forEach(item => {
    const div = document.createElement('div');
    div.innerText = item;
    inner.appendChild(div);
  });
  slot.appendChild(inner);
}

function updateSlot(id, items, value) {
  const slot = document.querySelector(`#${id} .slot-inner`);
  const index = items.indexOf(value);
  const offset = index * 20;
  slot.style.transform = `translateY(-${offset}px)`;
}

function updateTimeSlider(value) {
  const minutes = value + 'åˆ†';
  const pay = (value * 200) + 'å††';
  updateSlot('timeSlot', timeItems, minutes);
  updateSlot('paySlot', payItems, pay);

  const slider = document.getElementById('timeSlider');
  const percent = (value / 60) * 100;
  slider.style.background = `linear-gradient(to right, #00acc1 ${percent}%, #ccc ${percent}%)`;
}

const timeItems = [];
for (let i = 0; i <= 60; i++) {
  timeItems.push(i + 'åˆ†');
}
const payItems = [];
for (let i = 0; i <= 60; i++) {
  payItems.push((i * 200) + 'å††');
}

generateSlot('timeSlot', timeItems);
generateSlot('paySlot', payItems);

document.getElementById('timeSlider').addEventListener('input', function() {
  updateTimeSlider(parseInt(this.value));
});

updateTimeSlider(5);

// ä»®ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆå®šãƒ‡ãƒ¼ã‚¿
const onlineSchedule = {
  '2025-04-10': ['09:00', '13:00', '20:00'],
  '2025-04-11': ['10:00', '15:00', '18:00'],
  '2025-04-12': ['08:00', '11:00', '19:00'],
};

// ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é–‹é–‰ï¼‹ãƒœã‚¿ãƒ³åˆ‡æ›¿
function toggleCalendar() {
  const area = document.getElementById('calendarArea');
  const button = document.getElementById('toggleCalendarBtn');
  
  if (area.style.display === 'none') {
    area.style.display = 'block';
    button.innerText = 'æˆ»ã‚‹';
    drawCalendar(new Date());
  } else {
    area.style.display = 'none';
    button.innerText = 'äºˆç´„ã™ã‚‹';
    document.getElementById('timeListArea').style.display = 'none';
  }
}

let selectedDayDiv = null;

// ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æç”»
function drawCalendar(date) {
  const calendar = document.getElementById('calendar');
  calendar.innerHTML = '';

  const year = date.getFullYear();
  const month = date.getMonth();

  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const startDay = firstDay.getDay();
  const totalDays = lastDay.getDate();

  const title = document.createElement('div');
  title.innerHTML = `${year}å¹´ ${month + 1}æœˆ`;
  title.style.marginBottom = '10px';
  title.style.fontWeight = 'bold';
  calendar.appendChild(title);

  const weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
  const weekRow = document.createElement('div');
  weekRow.style.display = 'grid';
  weekRow.style.gridTemplateColumns = 'repeat(7, 1fr)';
  weekRow.style.marginBottom = '5px';
  weekdays.forEach(day => {
    const wd = document.createElement('div');
    wd.innerText = day;
    wd.style.fontSize = '12px';
    wd.style.color = '#666';
    wd.style.textAlign = 'center';
    weekRow.appendChild(wd);
  });
  calendar.appendChild(weekRow);

  const grid = document.createElement('div');
  grid.style.display = 'grid';
  grid.style.gridTemplateColumns = 'repeat(7, 1fr)';
  grid.style.gap = '5px';

  for (let i = 0; i < (startDay + 6) % 7; i++) {
    const empty = document.createElement('div');
    grid.appendChild(empty);
  }

  for (let d = 1; d <= totalDays; d++) {
    const day = document.createElement('div');
    day.innerText = d;
    day.style.padding = '10px 0';
    day.style.background = '#e0f7fa';
    day.style.borderRadius = '10px';
    day.style.cursor = 'pointer';
    day.style.position = 'relative';
    day.style.textAlign = 'center';

    const fullDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
    if (onlineSchedule[fullDate]) {
      const dot = document.createElement('div');
      dot.style.width = '8px';
      dot.style.height = '8px';
      dot.style.background = 'limegreen';
      dot.style.borderRadius = '50%';
      dot.style.position = 'absolute';
      dot.style.bottom = '5px';
      dot.style.left = '50%';
      dot.style.transform = 'translateX(-50%)';
      day.appendChild(dot);
    }

    day.onclick = () => {
      if (selectedDayDiv) {
        selectedDayDiv.style.background = '#e0f7fa';
      }
      day.style.background = 'linear-gradient(45deg, #4dd0e1, #00acc1)';
      selectedDayDiv = day;
      showTimeList(fullDate);
    };

    grid.appendChild(day);
  }

  calendar.appendChild(grid);
}

// æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯ â†’ æ™‚é–“ãƒªã‚¹ãƒˆè¡¨ç¤º
function showTimeList(date) {
  const timeListArea = document.getElementById('timeListArea');
  const selectedDate = document.getElementById('selectedDate');
  const timeList = document.getElementById('timeList');
  const confirmArea = document.getElementById('confirmArea');

  selectedDate.innerText = `${date} ã®æ™‚é–“å¸¯ã‚’é¸æŠ`;
  timeList.innerHTML = '';
  confirmArea.style.display = 'none';

  for (let hour = 0; hour < 24; hour++) {
    const hourText = `${String(hour).padStart(2, '0')}:00ï½${String(hour + 1).padStart(2, '0')}:00`;

    const div = document.createElement('div');
    div.innerText = hourText;
    div.style.padding = '10px';
    div.style.marginBottom = '5px';
    div.style.borderRadius = '8px';
    div.style.textAlign = 'center';
    div.style.position = 'relative';

    const schedule = onlineSchedule[date] || [];

    if (schedule.includes(`${String(hour).padStart(2, '0')}:00`)) {
      div.style.background = '#e0f7fa';
      div.style.cursor = 'pointer';
      div.onmouseover = () => div.style.background = '#b2ebf2';
      div.onmouseout = () => div.style.background = '#e0f7fa';
      div.onclick = () => {
        document.querySelectorAll('#timeList div').forEach(el => {
          if (el.style.background.includes('gradient')) {
            el.style.background = '#e0f7fa';
          }
        });
        div.style.background = 'linear-gradient(45deg, #4dd0e1, #00acc1)';
        confirmArea.style.display = 'block';
      };

      const dot = document.createElement('div');
      dot.style.width = '10px';
      dot.style.height = '10px';
      dot.style.background = 'limegreen';
      dot.style.borderRadius = '50%';
      dot.style.position = 'absolute';
      dot.style.left = '10px';
      dot.style.top = '50%';
      dot.style.transform = 'translateY(-50%)';
      div.appendChild(dot);
    } else {
      div.style.background = '#ccc';
      div.style.opacity = '0.5';
      div.style.cursor = 'default';

      const cross = document.createElement('div');
      cross.innerText = 'âœ•';
      cross.style.position = 'absolute';
      cross.style.left = '10px';
      cross.style.top = '50%';
      cross.style.transform = 'translateY(-50%)';
      cross.style.color = '#666';
      cross.style.fontSize = '14px';
      div.appendChild(cross);
    }

    timeList.appendChild(div);
  }

  timeListArea.style.display = 'block';
}

// äºˆç´„ç¢ºèªå‡¦ç†
function confirmReservation() {
  alert('äºˆç´„ãŒç¢ºå®šã—ã¾ã—ãŸï¼');
}
// ã€ä»Šã™ãé€šè©±ã€‘ãƒœã‚¿ãƒ³ç”¨ï¼šä»®ã®å‡¦ç†
function startCall() {
  alert('é€šè©±ã‚’é–‹å§‹ã—ã¾ã™ï¼');
}
// ãƒãƒ£ãƒƒãƒˆã™ã‚‹ãƒœã‚¿ãƒ³ç”¨ï¼šä»®ã®å‡¦ç†
function startChat() {
  alert('ãƒãƒ£ãƒƒãƒˆç”»é¢ã«ç§»å‹•ã—ã¾ã™ï¼');
}
</script>

</body>
</html>
