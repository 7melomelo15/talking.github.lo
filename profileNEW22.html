<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Talking</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Briem+Hand&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; font-family: 'Poppins', sans-serif; background: #ffffff; color: #333; min-height: 100vh; overflow-x: hidden; }
    .page { display: none; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; text-align: center; }
    .page.active { display: flex; }
    .container { width: 100%; max-width: 400px; position: relative; }
    .header { width: 100%; text-align: center; position: relative; margin-bottom: 5px;
  display: flex;              /* ★追加！ */
  align-items: center;        /* ★縦中央揃え！ */
  justify-content: center;    /* ★横中央揃え！ */}
    .menu { position: absolute; top: 0; left: 10px; font-size: 28px; color: #333; cursor: pointer; z-index: 1010; }
    .account-name { font-size: 30px; opacity: 0.7; font-family: 'Briem Hand', sans-serif; background: linear-gradient(90deg, #4dd0e1, #0071E3);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; margin: 0;            /* ★上下の余白をなくす */
  line-height: 1;       /* ★行の高さもきっちり詰める */
  display: flex;
  align-items: center;  /* ★中身（文字）を中央寄せする */
  justify-content: center;
  height: 40px;         /* ★高さを固定して、三重線＆？マークと合わせる */
}

    /* ▼ ハートボタン（枠なし、中だけ色変化） */
    .follow-button {
      position: absolute;
      top: 10px;
      right: 50px;
      width: 32px;
      height: 32px;
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .follow-button svg {
      width: 24px;
      height: 24px;
      fill: white;
      stroke: #ff0000;
      stroke-width: 2;
      transition: 0.3s;
    }
    .followed svg {
      fill: #ff0000;
      stroke: #ff0000;
    }

    /* ▼ 通知ベルアイコン */
    .notification {
      position: absolute;
      top: 0;
      right: 10px;
      font-size: 24px;
      color: #0071E3;
      cursor: pointer;
      z-index: 1010;
      display: flex;
      align-items: center;
    }
    .notification svg { width: 28px; height: 28px; stroke: #0071E3; }

    .side-menu { position: fixed; top: 0; left: -250px; width: 250px; height: 100%; background: #e0f7fa; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.2); transition: 0.3s; z-index: 1005; }
    .side-menu.active { left: 0; }
    .side-menu p { margin: 20px 0; font-size: 18px; }
    /* ▼ プロフィールセクション背景グラデーション */
    .profile {
      background: linear-gradient(to bottom, #EAF6FF, #FFFFFF);
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      position: relative;
      margin-bottom: 20px;
      transition: background 0.3s;
    }
    .profile img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px; object-fit: cover; }
    .profile h2 { font-family: 'SF Pro Display', sans-serif; font-size: 28px; font-weight: 600; color: #1D3B59; margin: 10px 0; }
    .profile-divider { width: 80%; border: none; border-top: 1px solid #ccc; margin: 20px auto; }

    .tag, .section-tag {
  position: absolute;
  top: 5px;
  left: 10px;
  background: transparent;
  color: #0071E3;
  padding: 3px 8px;
  border: none;
  border-radius: 9999px;
  font-size: 12px;
  font-family: 'SF Pro Text', sans-serif;
  font-weight: normal;
  
  background: 
    linear-gradient(#fff, #fff) padding-box,
    linear-gradient(180deg, #0071E3, #4dd0e1) border-box; /* ←ここだけ修正！ */
  border: 2px solid transparent;
}

    .status-dot { position: absolute; bottom: 8px; right: 8px; width: 16px; height: 16px; border: 2px solid #e0f7fa; border-radius: 50%; background-color: limegreen; }
    .status-online { background-color: limegreen; }
    .status-offline { background-color: gray; }
    .status-busy { background-color: red; }

    .stats { display: flex; justify-content: space-around; margin-top: 8px; align-items: center; text-align: center; }
    .stats div { cursor: pointer; padding: 1px; border-radius: 10px; transition: background 0.3s, padding 0.3s; font-family: 'SF Pro Text', sans-serif; color: #6E6E73; }
    .stats div:hover { background: #bbdaf2; padding-left: 20px; padding-right: 20px; }
    .number { display: block; font-size: 18px; color: #0071E3; margin: 1px 0; font-family: 'SF Pro Text', sans-serif; font-weight: normal; /* ★追加★ */}
    .label { display: block; font-size: 12px; color: #6E6E73; margin-top: 1px; font-family: 'SF Pro Text', sans-serif; }


    .star-rating {
  display: flex;
  align-items: center;
  justify-content: center; /* ★これ追加！中央に寄せる */
  gap: 3px; /* ★星同士の隙間を少し狭く */
  margin: 1px; /* ★margin-topいらない。ピタッと揃える */
}

.star {
  position: relative;
  width: 20px;
  height: 20px;
  background: linear-gradient(270deg, #4dd0e1, #0071E3, #4dd0e1);
  background-size: 600% 600%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: moveGradient 4s linear infinite;
  font-size: 20px;
}

.star.empty {
  background: #ccc;
  -webkit-background-clip: text;
  -webkit-text-fill-color: #ccc;
}

.star.half {
  background: linear-gradient(90deg, 
    #4dd0e1 50%, 
    #ccc 50%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-size: 200% 100%;
  background-position: left;
}

/* 流れるアニメーション */
@keyframes moveGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}


    .archivement { font-size: 12px; color: #6E6E73; margin-top: 1px; font-family: 'SF Pro Text', sans-serif; }
    /* ▼ セクション共通背景グラデーション */
    .section {
      background: linear-gradient(to bottom, #EAF6FF, #FFFFFF);
      padding: 20px;
      border-radius: 20px;
      margin-top: 20px;
      position: relative;
    }
    .section-list { max-height: 210px; overflow-y: auto; padding-top: 20px; padding-right: 5px; }
    .section-list::-webkit-scrollbar { display: none; }
    .theme-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 10px; border-bottom: 1px solid #ccc; transition: background 0.3s, padding 0.3s; cursor: pointer; font-family: 'SF Pro Text', sans-serif; color: #0071E3; }
    .theme-item:hover, .theme-item.selected { background: #bbdaf2; padding-left: 20px; padding-right: 20px; }
    .theme-text { text-align: left; }
    .theme-title { font-weight: normal; font-size: 14px; margin-bottom: 5px; font-family: 'SF Pro Text', sans-serif; color: #0071E3; }
    .theme-desc { font-size: 11px; color: #6E6E73; font-family: 'SF Pro Text', sans-serif; }

    .detail-button {
      background: #0071E3;
      color: #ffffff;
      padding: 6px 12px;
      border: 2px solid #0071E3;
      border-radius: 12px;
      font-size: 12px;
      font-family: 'SF Pro Text', sans-serif;
      cursor: pointer;
    }

    /* ▼ 料金セクション関係 */
    .charge-grid { display: flex; justify-content: center; align-items: center; text-align: center; margin-top: 10px; gap: 10px; flex-wrap: wrap; }
    .charge-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #333; min-width: 80px; font-family: 'SF Pro Text', sans-serif; }

.charge-item:hover {
  background:  #bbdaf2; /* ← うすい青背景にする */
  border-radius: 12px; /* ← 角を丸める */
  box-shadow: 0 4px 8px rgba(0, 113, 227, 0.2); /* ← ちょっとだけ影をつける */
  transition: 0.3s; /* ← なめらかに */
}
    .charge-icon { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; }
    .charge-label { font-size: 11px; color: #6E6E73; margin-top: 5px; font-family: 'SF Pro Text', sans-serif; }
    .charge-value { font-size: 14px; color: #6E6E73; margin-top: 5px; font-family: 'SF Pro Text', sans-serif; }
    .charge-symbol { font-size: 28px; color: #6E6E73; line-height: 1; font-family: 'SF Pro Text', sans-serif; }
    .slot { height: 20px; overflow: hidden; position: relative; }
.slot-inner {
  display: flex;
  flex-direction: column-reverse; /* ←これにする */
  transition: transform 0.5s ease-out;
}
.slot-inner div {
  height: 20px;
  line-height: 20px;
  font-size: 14px;
  color: #6E6E73;
  font-family: 'SF Pro Text', sans-serif;
  transform: none; /* ←こっちも回転しない！消す！ */
}
    /* 時計アイコン（針の色だけ#0071E3に） */
    .charge-icon svg line {
      stroke: #0071E3;
    }

.slider-ticks span:first-child {
  transform: translateX(-10%);
}

.slider-ticks span:last-child {
  transform: translateX(10%);
}


    /* ▼ 通話・予約ボタン（今すぐ通話＝濃いピンク） */
    .call-button {
  padding: 12px 24px;
  font-size: 14px;
  background: #ffffff;        /* 初期：白背景 */
  border: 2px solid #D1495B;  /* 赤枠 */
  color: #D1495B;             /* 赤文字 */
  border-radius: 12px;
  width: 40%;
  cursor: pointer;
  font-family: 'SF Pro Text', sans-serif;
  transition: 0.2s;
}

/* 押してトグルON（選択中）のデザイン */
button.call-button.active {
  background: #D1495B; 
  color: #ffffff;
}

    .reserve-button {
      padding: 12px 24px;
      font-size: 14px;
      background: #0071E3;
      border: 2px solid #0071E3;
      color: #ffffff;
      border-radius: 12px;
      width: 40%;
      cursor: pointer;
      font-family: 'SF Pro Text', sans-serif;
    }
    /* ▼ 料金スライダー（添付画像通り） */
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      background: linear-gradient(to right, #4dd0e1 0%, #0071E3 100%) no-repeat, #e0e0e0; 
      background-size: 30% 100%; /* ←最初の青色エリアの長さ */
      background-repeat: no-repeat;
      border-radius: 4px;
      outline: none;
      margin-top: 20px;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      background: #0071E3;
      border: 4px solid #ffffff;
      border-radius: 50%;
      cursor: pointer;
      margin-top: -8px;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
    }
    input[type=range]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: #0071E3;
      border: 4px solid #ffffff;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
    }

    /* ▼ ナビゲーションバー ▼ */
    .nav {
      display: flex;
      justify-content: space-around;
      background: #EAF6FF;
      position: fixed;
      bottom: 0;
      width: 100%;
      padding: 10px 0;
      border-top: 1px solid #ccc;
    }

    .nav button {
      background: #0071E3;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      color: white;
      cursor: pointer;
    }

    /* ▼ レスポンシブ調整 ▼ */
    @media (max-width: 768px) {
      .container {
        max-width: 100%;
        padding: 10px;
      }
    }
    @media (max-width: 480px) {
      .profile img {
        width: 60px;
        height: 60px;
      }
      .nav button {
        width: 40px;
        height: 40px;
      }
    }
/* ▼ プロフィール用ハート＆ベル配置 */
.profile-icons {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  gap: 10px;
}

.icon-button {
  background: transparent;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-button svg {
  width: 22px;
  height: 22px;
  stroke-width: 1.5; /* 線を細くする */
  stroke: #0071E3; /* 最初の線の色（ハートは赤に設定してる） */
  fill: white;     /* 中は白＝透明みたいな感じ */
  transition: 0.3s;
}
#followButton svg {
  stroke: #ff0000;
}

/* ハート押した後 */
.followed svg {
  fill: #ff0000;
  stroke: #ff0000;
}

/* ベル押した後 */
.notified svg {
  fill: #0071E3;
  stroke: #0071E3;
}
@keyframes flash {
  0% { color: #6E6E73; }
  50% { color: #0071E3; }
  100% { color: #6E6E73; }
}

.flash {
  animation: flash 0.6s ease;
}

/* ▼ 時間帯リストを3列だけ表示して、スクロールできるようにする ▼ */
#timeList {
  max-height: 180px;
  overflow-y: scroll;
  -ms-overflow-style: none;
  scrollbar-width: none;
  padding-top: 10px; /* ★ここ追加！上に10pxくらい余白を入れる */
}

/* ▼ Chrome/Safariでスクロールバーを消す */
#timeList::-webkit-scrollbar {
  display: none;
}

/* ▼ 分スライダー用デザイン */
.minute-slider {
  margin-top: 10px;
}

.slider {
  width: 90%;
  margin-top: 10px;
}

.minute-display {
  font-size: 14px;
  color: #0071E3;
  margin-top: 5px;
}

input.no-thumb::-webkit-slider-thumb {
  width: 0;
  height: 0;
  background: transparent;
  border: none;
  box-shadow: none;
}
input.no-thumb::-moz-range-thumb {
  width: 0;
  height: 0;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* 目盛り用スタイル */
.slider-ticks {
  display: flex;
  justify-content: space-between;
  margin-top: 5px;
  font-size: 12px;
  color: #6E6E73; /* グレー */
  padding: 0 5px;
}

/* ▼ ？マークボタン（ヘルプボタン）追加 ▼ */
.help-button {
  position: absolute;
  top: 5px;
  right: 10px; /* ベルよりさらに右上に設置 */
  background: transparent;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  z-index: 1015; /* 他より前面に出す */
}

.help-button svg {
  width: 36px;
  height: 36px;
}

.time-body {
  flex-grow: 1;
  height: 60px;
  margin-left: 10px;
  border-radius: 0; /* ← 四角くする */
  background: #ccc;
  position: relative;
  border: 2px solid transparent;
}

.time-body.online {
  background: #cae5fa;
  cursor: pointer;
}

.time-body.reserved {
  background: #FFD700;
  opacity: 0.8;
}

.time-body.offline {
  background: #e0e0e0;
  opacity: 0.5;
}

.time-slot.active .time-body {
  background: #bbdaf2; /* 選択中 水色 */
  border: 2px solid #0071E3; /* 青枠線 */
}

/* ドットの共通スタイル */
.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  position: absolute;
  top: 8px;
  left: 8px;
}

.online-dot {
  background: limegreen;
}

.reserved-dot {
  background: orange;
}


/* ▼ 5分単位ボックス ▼ */
.time-body-5min {
  flex-grow: 1;
  height: 25px;   /* 少し低くする */
  margin-left: 10px;
  background: #e0e0e0; /* デフォルトはグレー */
  border: 1px solid transparent;
  position: relative;
  border-radius: 4px;
}

/* オンライン（緑背景・緑ドット） */
.online-5min {
  background: #e6f9f0; /* 薄い緑背景 */
}
.online-5min .dot {
  background: limegreen;
}

/* オフライン（グレー） */
.offline-5min {
  background: #f0f0f0;
  opacity: 0.5;
}

/* 予約済み（薄い黄色） */
.reserved-5min {
  background: #fff9e6;
}

/* 選択中（水色） */
.selected-5min {
  background: #bbdaf2;
  border: 2px solid #0071E3;
}

/* 目盛り線（時間ラベル横に引く線） */
.time-slot {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
  position: relative;
}

.time-label {
  width: 50px;
  text-align: right;
  font-size: 12px;
  line-height: 25px;
  color: #6E6E73;
  position: relative;
  transform: translateY(-50%);  /* ★これ追加！ */
  font-family: 'SF Pro Text', monospace, sans-serif; /* ← ここを追加！ */
  text-align: center; /* ← 横も中央に寄せたいなら追加！ */
}

.time-label.highlight::after {
  background: #999; /* 00分・60分の線だけ濃く */
}

/* ▼ カレンダーアニメーション用 ▼ */
#calendar {
  transition: transform 0.5s ease;
}
.calendar-slide-next {
  transform: translateX(100%);
}
.calendar-slide-prev {
  transform: translateX(-100%);
}


  </style>
</head>
<body>
<!-- サイドメニュー -->


<!-- トップページ -->
<div id="page-home" class="page active">
  <div class="container">

    <!-- ヘッダー -->
    <div class="header">
      <div class="menu">≡</div>
      <h1 class="account-name animated-gradient">Talking</h1>
<button class="help-button" onclick="openHelp()">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="none">
    <circle cx="12" cy="12" r="12" fill="#0071E3"/>
    <text x="12" y="18" text-anchor="middle" font-size="22" fill="white" font-family="Arial, sans-serif">?</text>
  </svg>
</button>
      </div>
    <!-- プロフィール -->
    <div class="profile">
<div class="profile-icons">
  <!-- ハートボタン -->
  <button class="icon-button" id="followButton" onclick="toggleFollow()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="#ff0000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 
               2 5.42 4.42 3 7.5 3 
               c1.74 0 3.41 0.81 4.5 2.09 
               C13.09 3.81 14.76 3 16.5 3 
               19.58 3 22 5.42 22 8.5 
               c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
    </svg>
  </button>

  <!-- ベルボタン -->
  <button class="icon-button" id="notificationButton" onclick="toggleNotification()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="#0071E3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
  </button>
</div>
      <div class="tag">プロフィール</div>
      <div style="position: relative; display: inline-block;">
        <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=80&h=80&q=80" alt="Profile">
        <div class="status-dot status-online"></div>
      </div>
      <h2>Hikaru</h2>
      <hr class="profile-divider">
      <div class="stats">
        <div>
          <span class="number">999</span>
          <span class="label">フォロワー</span>
        </div>
        <div>
          <div class="star-rating" id="starRating"></div> <!-- ←ここでJSで動的に星を描画する -->
          <span class="archivement">評価レビュー</span>
        </div>
        <div>
          <span class="number">99</span>
          <span class="label">通話回数</span>
        </div>
      </div>
    </div>

    <!-- テーマ -->
    <div class="section">
      <div class="section-tag">テーマ</div>
      <div class="section-list" id="themeList">
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">留学</div>
            <div class="theme-desc">アメリカとヨーロッパ留学経験あり！</div>
          </div>
          <button class="detail-button" onclick="openModal('studyModal'); event.stopPropagation();">詳細を見る</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">税務相談</div>
            <div class="theme-desc">日独間の税務専門サポート！</div>
          </div>
          <button class="detail-button" onclick="openModal('taxModal'); event.stopPropagation();">詳細を見る</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">占い</div>
            <div class="theme-desc">タロットと西洋占星術が得意！</div>
          </div>
          <button class="detail-button" onclick="openModal('fortuneModal'); event.stopPropagation();">詳細を見る</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">海外旅行</div>
            <div class="theme-desc">ヨーロッパの穴場スポットを紹介！</div>
          </div>
          <button class="detail-button" onclick="openModal('travelModal'); event.stopPropagation();">詳細を見る</button>
        </div>
        <div class="theme-item" onclick="toggleSelect(this)">
          <div class="theme-text">
            <div class="theme-title">駐在</div>
            <div class="theme-desc">ドイツ生活で役立つ情報がたくさん！</div>
          </div>
          <button class="detail-button" onclick="openModal('expatModal'); event.stopPropagation();">詳細を見る</button>
        </div>
      </div>
    </div>
    <!-- 料金 -->
    <div class="section">
      <div class="section-tag">料金</div>
      <div class="charge-grid">
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" width="100%" height="100%">
              <rect x="2" y="2" width="60" height="44" rx="6" ry="6" stroke="#333" stroke-width="1" fill="none"></rect>
              <rect x="6" y="6" width="52" height="36" rx="4" ry="4" stroke="#333" stroke-width="0.5" fill="none"></rect>
              <circle cx="14" cy="14" r="3" stroke="#333" stroke-width="1" fill="none"></circle>
              <text x="32" y="30" text-anchor="middle" font-size="20" fill="#333" font-family="Arial, sans-serif">¥</text>
            </svg>
          </div>
          <div class="charge-label">単価（分）</div>
          <div class="charge-value">200円</div>
        </div>
        <div class="charge-symbol">×</div>
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100%" height="100%">
              <circle cx="12" cy="12" r="10" stroke="#333" stroke-width="1" fill="none" />
              <line x1="12" y1="12" x2="12" y2="7" stroke="#0071E3" stroke-width="1.5" stroke-linecap="round" />
              <line x1="12" y1="12" x2="16" y2="12" stroke="#0071E3" stroke-width="1.5" stroke-linecap="round" />
            </svg>
          </div>
          <div class="charge-label">ご利用時間</div>
          <div class="charge-value">
            <div class="slot" id="timeSlot"></div>
          </div>
        </div>
        <div class="charge-symbol">＝</div>
        <div class="charge-item">
          <div class="charge-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" fill="none" width="100%" height="100%">
              <rect x="2" y="4" width="60" height="40" rx="4" ry="4" stroke="#333" stroke-width="2" fill="none"></rect>
              <rect x="10" y="16" width="12" height="8" rx="1" ry="1" fill="#FFD700" stroke="#FFD700" stroke-width="1"></rect>
              <line x1="2" y1="16" x2="62" y2="16" stroke="#333" stroke-width="2"></line>
            </svg>
          </div>
          <div class="charge-label">お支払額</div>
          <div class="charge-value">
            <div class="slot" id="paySlot"></div>
          </div>
        </div>
      </div>

      <!-- スライダー -->
      <div>
        <input type="range" id="timeSlider" min="1" max="60" step="1" value="1">
        <!-- ここに目盛りを追加 -->
         <div class="slider-ticks">
         <span>0</span>
         <span>10</span>
         <span>20</span>
         <span>30</span>
         <span>40</span>
         <span>50</span>
         <span>60</span>
       </div>
      </div>
    </div>
    <!-- 通話/予約 -->
    <div class="section">
      <div class="section-tag">通話/予約</div>
      <div style="margin-top:30px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
        <button class="call-button" onclick="toggleCallButton()">今すぐ通話</button>
        <button class="reserve-button" id="toggleCalendarBtn" onclick="toggleCalendar()">予約する</button>
      </div>

      <!-- カレンダーエリア・時間リスト -->
<div id="calendarArea" style="display:none; margin-top:20px;">
  <div id="calendarHeader"></div> <!-- ←カレンダーヘッダー -->
  <div id="calendar"></div>       <!-- ←カレンダー本体 -->
</div>

<div id="timeListArea" style="display:none; margin-top:20px;">
  <!-- ▼ここを修正！ 日付と◀▶ボタンをセットにする -->
  <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom:10px;">
    <button id="prevDateButton" style="background: none; border: none; font-size: 14px; cursor: pointer;">◀</button>
    <div id="selectedDate" style="font-size: 14px; color: #333;"></div>
    <button id="nextDateButton" style="background: none; border: none; font-size: 14px; cursor: pointer;">▶</button>
  </div>

  <div id="timeList"></div>
  <div id="confirmArea" style="display:none; margin-top:20px;">
    <button class="detail-button" onclick="confirmReservation()">オファーする</button>
  </div>
</div>
    </div>

  </div> <!-- container end -->
</div> <!-- page-home end -->

<!-- チャットするボタン -->
<div style="display: flex; justify-content: center; margin: 30px 0;">
  <button style="
    width: 85%;
    padding: 12px 20px;
    font-size: 16px;
    color: #0071E3;
    background: white;
    border: 2px solid #0071E3;
    border-radius: 12px;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
  " onclick="startChat()">チャットする</button>
</div>

<!-- ナビゲーションバー -->
<div class="nav">
  <button><img src="home-icon.svg" alt="ホーム" style="width:24px; height:24px;"></button>
  <button><img src="search-icon.svg" alt="検索" style="width:24px; height:24px;"></button>
  <button><img src="plus-icon.svg" alt="追加" style="width:24px; height:24px;"></button>
  <button><img src="chat-icon.svg" alt="チャット" style="width:24px; height:24px;"></button>
  <button><img src="user-icon.svg" alt="マイページ" style="width:24px; height:24px;"></button>
</div>

<!-- スクリプト -->
<script>
let selectedDayDiv = null;
let onlineSchedule = {
  '2025-04-10': [
    '09:00', '09:05', '09:10', '09:30', '09:45',
    '10:00', '10:20', '10:25', '11:00', '11:05', '11:10',
    '13:00', '13:05', '13:30', '14:00', '15:00', '15:30',
    '18:00', '18:05', '18:10', '18:45', '19:00', '20:00'
  ],
  '2025-04-11': [
    '08:00', '08:05', '08:10', '09:00', '09:15',
    '10:00', '10:10', '10:20', '11:30', '12:00', '12:05',
    '15:00', '15:05', '15:15', '16:00', '16:30',
    '18:00', '18:05', '19:00', '19:15', '20:00', '21:00'
  ],
  '2025-04-12': [
    '07:00', '07:05', '07:10', '08:00', '08:30', 
    '09:00', '09:05', '10:00', '11:00', '11:05', '12:00',
    '13:00', '13:10', '14:00', '15:00', '15:30',
    '17:00', '17:05', '18:00', '19:00', '20:00', '22:00'
  ],
  '2025-04-13': [
    '06:00', '06:05', '07:00', '07:30', '08:00', '08:05',
    '09:00', '10:00', '11:00', '12:00', '13:00', '14:00',
    '18:00', '18:10', '18:20', '19:00', '20:00'
  ],
  '2025-04-14': [
    '09:00', '09:10', '09:20', '10:00', '10:05', '11:00',
    '13:00', '13:05', '14:00', '15:00', '16:00', '17:00',
    '18:00', '18:10', '19:00', '20:00', '21:00'
  ]
};

// 予約済みスケジュール（ほんの少し）
let reservedSchedule = {
  '2025-04-10': ['10:00', '18:00'],
  '2025-04-11': ['15:05'],
  '2025-04-12': ['09:05', '17:00'],
  '2025-04-13': ['08:05'],
  '2025-04-14': ['13:05', '18:00']
};

let selectedTimeDiv = null;
function toggleMenu() {
  document.getElementById('sideMenu').classList.toggle('active');
}



// ♡ハートボタンクリック（色変化）
function toggleFollow() {
  const button = document.getElementById('followButton');
  button.classList.toggle('followed');
  const followerNumber = document.querySelector('.number'); // ← フォロワー数の場所を取る
  let currentFollowers = parseInt(followerNumber.textContent);

  if (button.classList.contains('followed')) {
    followerNumber.textContent = currentFollowers + 1; // フォローしたら＋1
  } else {
    followerNumber.textContent = currentFollowers - 1; // フォロー解除したら−1
}
}

function toggleNotification() {
  const button = document.getElementById('notificationButton');
  button.classList.toggle('notified');
}

// スロット生成・更新
function generateSlot(id, items) {
  const slot = document.getElementById(id);
  slot.innerHTML = '';  // ← まず一旦中身クリア！これ超重要
  const inner = document.createElement('div');
  inner.className = 'slot-inner';
  items.forEach(item => {
    const div = document.createElement('div');
    div.innerText = item;
    inner.appendChild(div);
  });
  slot.appendChild(inner); // ← ちゃんと slot の中に inner を入れる
}

function updateSlot(id, items, value) {
  const slot = document.querySelector(`#${id} .slot-inner`);
  const index = items.indexOf(value);
  if (index === -1) return;
  const offset = (items.length - 1 - index) * 20;  // ←ここを変える！
  slot.style.transform = `translateY(${-offset}px)`;
}

function updateTimeSlider(value) {
  const minutes = value + '分';
  const pay = (value * 200) + '円';
  updateSlot('timeSlot', timeItems, minutes);
  updateSlot('paySlot', payItems, pay);

  const slider = document.getElementById('timeSlider');
  const percent = (value / 60) * 100;
  slider.style.background = `linear-gradient(
  to right,
  #4dd0e1 0%,      /* 最初は水色 */
  #0071E3 ${percent}%, /* 指定位置までグラデーション */
  #e0e0e0 ${percent}%, /* そこから急にグレー */
  #e0e0e0 100%    /* 最後までグレー */
)`;
}

function flashPay() {
  const paySlot = document.getElementById('paySlot');
  const slotInner = paySlot.querySelector('.slot-inner');
  
  // アニメーションリセット（一回クラスを外す）
  slotInner.classList.remove('flash');
  
  // 強制的に再描画 → これでアニメーションがもう一回走る
  void slotInner.offsetWidth;
  
  // もう一回クラスを付け直す
  slotInner.classList.add('flash');
}

const timeItems = [];
const payItems = [];
for (let i = 0; i <= 60; i++) {   // ←昇順！
  timeItems.push(i + '分');
  payItems.push((i * 200) + '円');
}

// スロット生成
generateSlot('timeSlot', timeItems);
generateSlot('paySlot', payItems);

// ★ここでスライダーとスロットを一発で正しく初期化する！（5分に設定）
document.getElementById('timeSlider').value = 5;
updateTimeSlider(5);

// スライダーにリスナー追加（5分単位でスナップさせる）
document.getElementById('timeSlider').addEventListener('input', function() {
  let value = parseInt(this.value);

  // ここを追加！5分単位に四捨五入する
  value = Math.round(value / 5) * 5;

  // 0分は選べないので強制的に5分にする
  if (value === 0) value = 5;

  this.value = value; // ← スライダーのつまみを修正
  updateTimeSlider(value); // ← スロット＆グラデーションを更新
});

// カレンダー開閉
function toggleCalendar() {
  const area = document.getElementById('calendarArea');
  const button = document.getElementById('toggleCalendarBtn');
  const callButton = document.querySelector('.call-button');

if (area.style.display === 'none') {
  area.style.display = 'block';
  button.innerText = '戻る';
  drawCalendar(new Date());

  // カレンダー開いたとき：ボタンをグレーにして無効化
  callButton.disabled = true;
  callButton.style.background = '#cccccc'; // ← グレー背景
  callButton.style.color = '#ffffff';      // ← 白文字
  callButton.style.border = '2px solid #cccccc'; // ← 枠線もグレー
  callButton.style.cursor = 'not-allowed';
} else {
  area.style.display = 'none';
  button.innerText = '予約する';
  document.getElementById('timeListArea').style.display = 'none';

  // カレンダー閉じたとき：ボタンを元のデザインに戻す
  callButton.disabled = false;
  callButton.style.background = '#ffffff'; 
  callButton.style.color = '#D1495B';
  callButton.style.border = '2px solid #D1495B';
  callButton.style.cursor = 'pointer';
}
}


// カレンダー描画
function drawCalendar(date = currentDate) {
  const calendar = document.getElementById('calendar'); 
  const calendarHeader = document.getElementById('calendarHeader'); // ★ヘッダーも取得する！
  calendar.innerHTML = '';           // カレンダー（日付グリッド）をクリア
  calendarHeader.innerHTML = '';     // カレンダー（ヘッダー）もクリア

  const year = date.getFullYear();
  const month = date.getMonth();

  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const startDay = firstDay.getDay();
  const totalDays = lastDay.getDate();

  // --- ヘッダー作成 (calendarHeaderに入れる) ---
  const header = document.createElement('div');
  header.style.display = 'flex';
  header.style.alignItems = 'center';
  header.style.justifyContent = 'space-between';
  header.style.marginBottom = '5px';
  header.style.padding = '0 10px'; // 左右余白を追加

  // 前月ボタン
  const prevBtn = document.createElement('button');
  prevBtn.innerText = '＜前月';
  prevBtn.style.background = 'none';
  prevBtn.style.border = 'none';
  prevBtn.style.color = '#666';
  prevBtn.style.cursor = 'pointer';
  prevBtn.style.fontSize = '14px';
  prevBtn.onclick = () => changeMonth(-1);

  // 翌月ボタン
  const nextBtn = document.createElement('button');
  nextBtn.innerText = '翌月＞';
  nextBtn.style.background = 'none';
  nextBtn.style.border = 'none';
  nextBtn.style.color = '#666';
  nextBtn.style.cursor = 'pointer';
  nextBtn.style.fontSize = '14px';
  nextBtn.onclick = () => changeMonth(1);

  // 年月タイトル
  const title = document.createElement('div');
  title.innerHTML = `${year}年 ${month + 1}月`;
  title.style.fontWeight = 'normal';
  title.style.fontSize = '16px';

  header.appendChild(prevBtn);
  header.appendChild(title);
  header.appendChild(nextBtn);

  // ★ヘッダーは calendarHeader に追加
  calendarHeader.appendChild(header);

  // --- カレンダー（日付グリッド）作成 (calendarに入れる) ---
  const weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
  const weekRow = document.createElement('div');
  weekRow.style.display = 'grid';
  weekRow.style.gridTemplateColumns = 'repeat(7, 1fr)';
  weekRow.style.marginBottom = '5px';
  
  weekdays.forEach(day => {
    const wd = document.createElement('div');
    wd.innerText = day;
    wd.style.fontSize = '12px';
    wd.style.color = '#666';
    wd.style.textAlign = 'center';
    weekRow.appendChild(wd);
  });
  
  calendar.appendChild(weekRow);

  const grid = document.createElement('div');
  grid.style.display = 'grid';
  grid.style.gridTemplateColumns = 'repeat(7, 1fr)';
  grid.style.gap = '5px';

  for (let i = 0; i < (startDay + 6) % 7; i++) {
    const empty = document.createElement('div');
    grid.appendChild(empty);
  }

  for (let d = 1; d <= totalDays; d++) {
    const day = document.createElement('div');
    day.innerText = d;
    day.style.padding = '10px 0';
    day.style.borderRadius = '10px';
    day.style.position = 'relative';
    day.style.textAlign = 'center';

    const fullDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;

    if (onlineSchedule[fullDate]) {
      // ★オンライン予定あり
      day.style.background = '#cae5fa';
      day.style.cursor = 'pointer';

      const dot = document.createElement('div');
      dot.style.width = '8px';
      dot.style.height = '8px';
      dot.style.background = 'limegreen';
      dot.style.borderRadius = '50%';
      dot.style.position = 'absolute';
      dot.style.bottom = '5px';
      dot.style.left = '50%';
      dot.style.transform = 'translateX(-50%)';
      day.appendChild(dot);

      day.onclick = () => {
        if (selectedDayDiv !== day) {
          if (selectedDayDiv) {
            selectedDayDiv.style.background = '#cae5fa';
          }
          day.style.background = '#7cc4fc';
          selectedDayDiv = day;

          document.getElementById('timeListArea').style.display = 'block';
          setSelectedDate(fullDate); // ← これに変更！！
        }
      };
    } else {
      // ★オンライン予定なし
      day.style.background = '#cccccc';
      day.style.opacity = '0.5';
      day.style.cursor = 'default';
    }

    grid.appendChild(day);
  }

  calendar.appendChild(grid);
}

// 月移動
function changeMonth(diff) {
  const calendar = document.getElementById('calendar');
  const calendarHeader = document.getElementById('calendarHeader');

  if (diff === 1) {
    calendar.classList.add('calendar-slide-prev');
  } else {
    calendar.classList.add('calendar-slide-next');
  }

  setTimeout(() => {
    const title = calendarHeader.querySelector('div > div:nth-child(2)');
    const match = title.innerText.match(/(\d+)年 (\d+)月/);
    let year = parseInt(match[1]);
    let month = parseInt(match[2]) - 1; // JavaScriptは月0始まり！

    const newDate = new Date(year, month + diff, 1);

    currentDate = newDate; 
    drawCalendar(currentDate);

    calendar.classList.remove('calendar-slide-next', 'calendar-slide-prev');
  }, 300);
}



// 予約確認処理
function confirmReservation() {
  alert('予約確認画面へ進みます！（ここで相手名、開始・終了時間、料金を表示）');
}

// 【今すぐ通話】ボタン用：仮の処理
function startCall() {
  alert('通話を開始します！');
}

// チャットするボタン用：仮の処理
function startChat() {
  alert('チャット画面に移動します！');
}

function updateMinute(slider) {
  const parentDiv = slider.parentElement;
  const display = parentDiv.querySelector('.minute-display');
  const selectedHour = slider.getAttribute('data-hour') || '00';
  const startMinutes = parseInt(slider.value);
  const serviceMinutes = parseInt(document.getElementById('timeSlider').value); // 利用時間（分）

  let adjustedServiceMinutes = serviceMinutes;
  if (startMinutes + serviceMinutes > 60) {
    adjustedServiceMinutes = 60 - startMinutes;
  }

  const endMinutes = startMinutes + adjustedServiceMinutes;
  const startTime = `${selectedHour}:${String(startMinutes).padStart(2, '0')}`;
  const endTime = `${selectedHour}:${String(endMinutes).padStart(2, '0')}`;

  // ★ここ追加！ スライダーを動かしても、選択色・confirmArea を必ずキープする
  if (selectedTimeDiv) {
    selectedTimeDiv.style.background = '#7cc4fc'; // 選択中カラーに固定
    document.getElementById('confirmArea').style.display = 'block'; // オファーするボタンも必ず表示
  }

  // 表示を更新
  display.innerHTML = `
    <div style="display: flex; justify-content: center; gap: 15px; font-size: 13px; color: #FFFFFF;">
      <div>開始時間: ${startTime}</div>
      <div>ご利用時間: ${adjustedServiceMinutes}分</div>
      <div>終了時間: ${endTime}</div>
    </div>
  `;

  // スライダー背景の更新（開始時間から終了時間だけグラデーション）
  const percentStart = (startMinutes / 60) * 100;
  const percentEnd = (endMinutes / 60) * 100;

  slider.style.background = `
    linear-gradient(
      to right,
      #e0e0e0 0%,
      #e0e0e0 ${percentStart}%,
      #4dd0e1 ${percentStart}%,
      #0071E3 ${percentEnd}%,
      #e0e0e0 ${percentEnd}%,
      #e0e0e0 100%
    )
  `;

// スライダーから指やマウスを離しても選択状態を維持する
slider.addEventListener('mouseup', () => {
  if (selectedTimeDiv) {
    selectedTimeDiv.style.background = '#7cc4fc'; // 選択中カラー
    document.getElementById('confirmArea').style.display = 'block'; // オファーするボタン
  }
});
slider.addEventListener('touchend', () => {
  if (selectedTimeDiv) {
    selectedTimeDiv.style.background = '#7cc4fc'; 
    document.getElementById('confirmArea').style.display = 'block'; 
  }
});
}
// ⭐【外に独立して】renderStars関数を置く！
function renderStars(score) {
  const container = document.getElementById('starRating');
  container.innerHTML = '';

  const fullStars = Math.floor(score);
  const hasHalfStar = score % 1 >= 0.25 && score % 1 <= 0.75;
  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

  for (let i = 0; i < fullStars; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.innerText = '★';
    container.appendChild(star);
  }

  if (hasHalfStar) {
    const halfStar = document.createElement('div');
    halfStar.className = 'star half';
    halfStar.innerText = '★';
    container.appendChild(halfStar);
  }

  for (let i = 0; i < emptyStars; i++) {
    const star = document.createElement('div');
    star.className = 'star empty';
    star.innerText = '★';
    container.appendChild(star);
  }
}

// 実行（例えば4.3の場合）
renderStars(4.3);

function toggleCallButton() {
  const button = document.querySelector('.call-button');
  
  // 無効化されてるなら何もしない！
  if (button.disabled) return;

  button.classList.toggle('active');
}



// ▼ オンライン予定がある日をリストにする
const onlineDates = Object.keys(onlineSchedule).sort(); // 日付順に並べる

// ▼ 現在選択中の日付を記憶する
let currentSelectedDate = null;

// ▼ 日付をセットして、画面を更新する関数
function setSelectedDate(date) {
  currentSelectedDate = date; // 現在日付を更新
  const selectedDate = document.getElementById('selectedDate');
  selectedDate.innerText = `${date} の時間帯を選択`; // テキストを更新
  showTimeList(date); // 時間リストも更新
}

// ▼ 前の日ボタン
document.getElementById('prevDateButton').addEventListener('click', () => {
  if (!currentSelectedDate) return;
  const currentIndex = onlineDates.indexOf(currentSelectedDate);
  if (currentIndex > 0) {
    const prevDate = onlineDates[currentIndex - 1];
    setSelectedDate(prevDate);
  }
});

// ▼ 次の日ボタン
document.getElementById('nextDateButton').addEventListener('click', () => {
  if (!currentSelectedDate) return;
  const currentIndex = onlineDates.indexOf(currentSelectedDate);
  if (currentIndex < onlineDates.length - 1) {
    const nextDate = onlineDates[currentIndex + 1];
    setSelectedDate(nextDate);
  }
});

// ▼ 時間帯クリック時にも、選択日を更新しておく（これをselectTimeSlot5Minにも追記してね）
function selectTimeSlot5Min(body, date) {
  currentSelectedDate = date; // ← これ追加！
  
  const selectedTime = body.dataset.time;
  const [hour, min] = selectedTime.split(':').map(Number);

  const useMinutes = parseInt(document.getElementById('timeSlider').value);
  const slots = Array.from(document.querySelectorAll('.online-5min'));
  const neededSlots = useMinutes / 5;
  const startIndex = slots.findIndex(slot => slot.dataset.time === selectedTime);
  if (startIndex === -1 || startIndex + neededSlots > slots.length) return;

  let valid = true;
  for (let i = 0; i < neededSlots; i++) {
    if (!slots[startIndex + i].classList.contains('online-5min')) {
      valid = false;
      break;
    }
  }
  if (!valid) return;

  slots.forEach(slot => slot.classList.remove('selected-5min'));
  for (let i = 0; i < neededSlots; i++) {
    slots[startIndex + i].classList.add('selected-5min');
  }

  // ここで時間も表示する場合はさらに追記できる（今は日付のみ）
  document.getElementById('confirmArea').style.display = 'block';
}





function showTimeList(date) {
  const timeList = document.getElementById('timeList');
  const selectedDate = document.getElementById('selectedDate');
  const confirmArea = document.getElementById('confirmArea');
  timeList.innerHTML = '';
  confirmArea.style.display = 'none';

  selectedDate.innerText = `${date} の時間帯を選択`;

  for (let hour = 0; hour < 24; hour++) {
  for (let min = 0; min < 60; min += 5) {
    const timeSlot = document.createElement('div');
    timeSlot.className = 'time-slot';

    const label = document.createElement('div');
label.className = 'time-label';
label.innerText = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}―`; // ←ここを修正

    const body = document.createElement('div');
    body.className = 'time-body-5min'; // ★5分単位用クラス
    body.dataset.time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;

    // 状態（オンライン/オフライン/予約済み）を判定して色付け
    const fullDate = date;
    const timeStr = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
    const schedule = onlineSchedule[fullDate] || [];
    const reserved = reservedSchedule[fullDate] || [];

    if (reserved.includes(timeStr)) {
      body.classList.add('reserved-5min'); // 予約
      body.innerHTML = '<div class="dot reserved-dot"></div>✕';
    } else if (schedule.includes(timeStr)) {
      body.classList.add('online-5min'); // オンライン
      body.innerHTML = '<div class="dot online-dot"></div>';
      body.addEventListener('click', () => selectTimeSlot5Min(body, fullDate));
    } else {
      body.classList.add('offline-5min'); // オフライン
      body.innerHTML = '<div class="dot offline-dot"></div>✕';
    }

    timeSlot.appendChild(label);
    timeSlot.appendChild(body);
    timeList.appendChild(timeSlot);
  }
}
}
let activeTimeSlot = null;

function selectTimeSlot5Min(body, date) {
  const selectedTime = body.dataset.time;
  const [hour, min] = selectedTime.split(':').map(Number);

  const useMinutes = parseInt(document.getElementById('timeSlider').value); // 利用時間
  const slots = Array.from(document.querySelectorAll('.online-5min'));

  // クリックされた時間帯から、利用時間分だけ5分間隔で空いているかチェック
  const neededSlots = useMinutes / 5;

  const startIndex = slots.findIndex(slot => slot.dataset.time === selectedTime);
  if (startIndex === -1 || startIndex + neededSlots > slots.length) return;

  // 全部連続で空いてるか？
  let valid = true;
  for (let i = 0; i < neededSlots; i++) {
    const slotTime = slots[startIndex + i].dataset.time;
    if (!slots[startIndex + i].classList.contains('online-5min')) {
      valid = false;
      break;
    }
  }
  if (!valid) return;

  // 選択スタイル適用
  slots.forEach(slot => slot.classList.remove('selected-5min'));
  for (let i = 0; i < neededSlots; i++) {
    slots[startIndex + i].classList.add('selected-5min');
  }

  // 【予約内容を確認する】ボタン表示
  document.getElementById('confirmArea').style.display = 'block';
}

</script>

</body>
</html>
